var O=Object.defineProperty;var B=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var N=(e,o,n)=>o in e?O(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,I=(e,o)=>{for(var n in o||(o={}))q.call(o,n)&&N(e,n,o[n]);if(B)for(var n of B(o))z.call(o,n)&&N(e,n,o[n]);return e};import{d as F,i as R,r as p,f as G,o as J,as as S,B as T,k as g,l as s,F as P,q as A,m as j,C as i,t as u,at as E,aD as Y,z as L,A as K,j as f,au as Q}from"./vendor.2a61fe6d.js";import{_ as W,q as X,r as Z,s as x,t as H,u as ee}from"./index.47e9b2ad.js";const te=F({name:"function",components:{},setup(){R("emitter").on("addArticles",a=>{V(1)});const o=p([{name:"Operate",key:"",sortDesc:null},{name:"Title",key:"title",sortDesc:null},{name:"Tag",key:"tag",sortDesc:null},{name:"Author",key:"author",sortDesc:null},{name:"CreateTime",key:"timeforshow",sortDesc:null},{name:"Category",key:"category",sortDesc:null},{name:"IsPublic",key:"isPublic",sortDesc:null}]),n=p([]),C=p(0),_=p(10),D=p(1),y=G();async function d(){var a,l,k;try{const m=+C.value/+_.value+1,He=(m-1)*_.value,Oe=_.value,U=await Z(`?page=${m}`);let M=[...(a=U.data)==null?void 0:a.articles];M=M.map($=>($.timeforshow=Y(new Date(+$.create_at)).format("YYYY/MM/DD HH:mm:ss"),$)),n.value=[...M],D.value=+((k=(l=U.data)==null?void 0:l.pagination)==null?void 0:k.total_pages)*10}catch(m){y.error(`${m.response?m.response.data.message:m}`,{timeout:2e3,hideProgressBar:!0})}}J(async()=>{await d()}),S(C,(a,l)=>{d()}),S(_,(a,l)=>{d()});const w=p(!1),c=p(1),r=p({}),V=async(a,l)=>{var k;if(b.value="",a==3)r.value=I({},l);else if(a==2){const m=await X(`${l.id}`);r.value=I({},m.data.article),((k=m.data.article)==null?void 0:k.tag)||(r.value.tag=[])}else r.value={tag:[]};c.value=a,w.value=!0},t=async()=>{const a=I({},r.value);a.due_date=Y(a.due_date).format("YYYY-MM-DD");try{if(c.value==1){a.create_at=+Date.now();const l=await x({data:a})}if(c.value==2){const l=await H({data:a},a.id)}if(c.value==3){const l=await ee(a.id)}y.info(`${c.value==1?"Add":c.value==2?"Edit":"Delete"} Success`,{timeout:2e3,hideProgressBar:!0})}catch(l){y.error(`${l.response?l.response.data.message:l}`,{timeout:2e3,hideProgressBar:!0})}d(),w.value=!1},v=async a=>{const l=I({},a);await H({data:l},l.id),d(),y.info("News\u8ABF\u6574Success",{timeout:2e3,hideProgressBar:!0})},b=p("");return{newTag:b,editTag:(a,l)=>{l==1?(r.value.tag.push(a),b.value=""):l==2&&(r.value.tag=r.value.tag.filter(k=>k!=a))},headers:o,items:n,toast:y,getData:d,offset:C,rows:_,totalItemsCount:D,editModal:w,modalItem:r,nowType:c,showEditModal:V,saveEditModal:t,setStatus:v}}}),h=e=>(L("data-v-8492a3b6"),e=e(),K(),e),oe={class:"main-section px-3"},se=h(()=>s("section",{class:"search-block"},[s("h5",{class:"big-title"},"News Management")],-1)),ae={class:"ecommerce-grid my-dark"},le=["onClick"],ne={class:"content",style:{cursor:"pointer","padding-top":"3px"}},de=["onClick"],ie=["onClick"],re=["title"],ue=["title"],ce=["title"],me=["title"],pe=["title"],ge=["title"],fe={key:0,class:"mt-2 text-center text-xl font-semibold col-span-full",style:{"font-family":"Microsoft JhengHei, Helvetica"}},ve={class:"grid grid-flow-col auto-cols-max justify-center"},he={class:"mt-4"},ye={class:"modal-main-content"},we={key:0,class:"mb-2 font-black text-xl"},be={class:"p-inputgroup mt-2 col-span-full"},ke=h(()=>s("span",{class:"p-inputgroup-addon red-star"},"Title",-1)),_e={class:"p-inputgroup mt-2"},Te=h(()=>s("span",{class:"p-inputgroup-addon red-star"},"Tag",-1)),Ie={class:"p-inputgroup mt-2"},Ce=h(()=>s("span",{class:"p-inputgroup-addon red-star"},"Image",-1)),Ve={class:"p-inputgroup mt-2 flex",style:{"grid-column":"1/-1"}},De=["onClick"],Me={class:"p-inputgroup mt-2"},$e=h(()=>s("span",{class:"p-inputgroup-addon red-star"},"Author",-1)),Pe={class:"p-inputgroup mt-2",style:{"grid-column":"1/-1"}},Ae=h(()=>s("span",{class:"p-inputgroup-addon red-star"},"Outline",-1)),Ee={class:"p-inputgroup mt-2"},Ue=h(()=>s("span",{class:"p-inputgroup-addon"},"IsPublic",-1)),Be={class:"p-inputgroup mt-2"},Ne=h(()=>s("span",{class:"p-inputgroup-addon"},"Category",-1)),Se={class:"p-inputgroup mt-2",style:{"grid-column":"1/-1"}};function je(e,o,n,C,_,D){const y=T("Paginator"),d=T("InputText"),w=T("Button"),c=T("Checkbox"),r=T("Editor"),V=T("Dialog");return f(),g("section",oe,[se,s("header",ae,[(f(!0),g(P,null,A(e.headers,(t,v)=>(f(),g("div",{key:`headers${v}`,class:"header",onClick:b=>e.sort(t)},u(t.name),9,le))),128))]),(f(!0),g(P,null,A(e.items,(t,v)=>(f(),g("main",{class:"ecommerce-grid",key:`content${v}`,style:Q([{color:"#39312e"},v%2==0?"background-color:#ffffff ;":"background-color:#e7f2f3;"])},[s("div",ne,[s("button",{class:"text-white font-bold uppercase px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-2 mb-1 text-sm",type:"button",style:{background:"#0d4a9e"},onClick:b=>e.showEditModal(2,t)}," Edit ",8,de),s("button",{class:"text-white font-bold uppercase px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 mb-1 text-sm",type:"button",style:{background:"#218be1"},onClick:b=>e.showEditModal(3,t)}," Delete ",8,ie)]),s("div",{class:"content",title:t.title},u(t.title||""),9,re),s("div",{class:"content",title:t.tag},u(t.tag?t.tag.join(","):""),9,ue),s("div",{class:"content",title:t.author},u(t.author||""),9,ce),s("div",{class:"content",title:t.timeforshow},u(t.timeforshow||""),9,me),s("div",{class:"content",title:t.category},u(t.category||""),9,pe),s("div",{class:"content",title:t.isPublic},u(t.isPublic?"Public":"Private"),9,ge)],4))),128)),e.items.length?j("",!0):(f(),g("main",fe," No Data ")),s("footer",ve,[i(y,{first:e.offset,"onUpdate:first":o[0]||(o[0]=t=>e.offset=t),rows:e.rows,"onUpdate:rows":o[1]||(o[1]=t=>e.rows=t),rowsPerPageOptions:[5,10,50],totalRecords:e.totalItemsCount},null,8,["first","rows","totalRecords"]),s("div",he,"\u5171"+u(e.totalItemsCount)+"\u7B46",1)]),i(V,{visible:e.editModal,"onUpdate:visible":o[12]||(o[12]=t=>e.editModal=t),style:{width:"85vw"},draggable:!1,modal:!0,class:"custom-modal"},{header:E(()=>[s("h3",null,u(e.nowType==1?"AddNews":e.nowType==2?"EditNews":"DeleteNews"),1)]),footer:E(()=>[i(w,{label:"Confirm",onClick:e.saveEditModal},null,8,["onClick"]),i(w,{label:"Cancel",class:"p-button-success",onClick:o[11]||(o[11]=t=>e.editModal=!1)})]),default:E(()=>[s("section",ye,[e.nowType==3?(f(),g("h2",we," Delete This News? ")):j("",!0),s("div",be,[ke,i(d,{type:"text",modelValue:e.modalItem.title,"onUpdate:modelValue":o[2]||(o[2]=t=>e.modalItem.title=t),modelModifiers:{trim:!0},disabled:e.nowType==3,class:"custom-search"},null,8,["modelValue","disabled"])]),s("div",_e,[Te,i(d,{modelValue:e.newTag,"onUpdate:modelValue":o[3]||(o[3]=t=>e.newTag=t),modelModifiers:{trim:!0},class:"custom-search",disabled:e.nowType==3,type:"text",placeholder:"\u52A0\u5165\u65B0TAG"},null,8,["modelValue","disabled"]),i(w,{label:"Add",onClick:o[4]||(o[4]=t=>e.editTag(e.newTag,1))})]),s("div",Ie,[Ce,i(d,{modelValue:e.modalItem.image,"onUpdate:modelValue":o[5]||(o[5]=t=>e.modalItem.image=t),modelModifiers:{trim:!0},class:"custom-search",disabled:e.nowType==3,type:"text"},null,8,["modelValue","disabled"])]),s("div",Ve,[(f(!0),g(P,null,A(e.modalItem.tag,(t,v)=>(f(),g("div",{class:"tage-data",key:`articles${v}`},[s("span",{class:"cursor-pointer",onClick:b=>e.editTag(t,2)},"\xA0#"+u(t)+"\xA0\xA0",9,De)]))),128))]),s("div",Me,[$e,i(d,{modelValue:e.modalItem.author,"onUpdate:modelValue":o[6]||(o[6]=t=>e.modalItem.author=t),modelModifiers:{trim:!0},class:"custom-search",disabled:e.nowType==3},null,8,["modelValue","disabled"])]),s("div",Pe,[Ae,i(d,{modelValue:e.modalItem.outline,"onUpdate:modelValue":o[7]||(o[7]=t=>e.modalItem.outline=t),modelModifiers:{trim:!0},class:"custom-search",disabled:e.nowType==3},null,8,["modelValue","disabled"])]),s("div",Ee,[Ue,i(c,{style:{margin:"12px 0 0 10px"},binary:!0,modelValue:e.modalItem.isPublic,"onUpdate:modelValue":o[8]||(o[8]=t=>e.modalItem.isPublic=t)},null,8,["modelValue"])]),s("div",Be,[Ne,i(d,{modelValue:e.modalItem.category,"onUpdate:modelValue":o[9]||(o[9]=t=>e.modalItem.category=t),modelModifiers:{trim:!0},class:"custom-search",disabled:e.nowType==3},null,8,["modelValue","disabled"])]),s("div",Se,[i(r,{class:"w-full custom-search",modelValue:e.modalItem.content,"onUpdate:modelValue":o[10]||(o[10]=t=>e.modalItem.content=t),editorStyle:"height: 460px",disabled:e.nowType==3},null,8,["modelValue","disabled"])])])]),_:1},8,["visible"])])}var Re=W(te,[["render",je],["__scopeId","data-v-8492a3b6"]]);export{Re as default};
