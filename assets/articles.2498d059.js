var q=Object.defineProperty;var S=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var N=(e,o,n)=>o in e?q(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,V=(e,o)=>{for(var n in o||(o={}))O.call(o,n)&&N(e,n,o[n]);if(S)for(var n of S(o))z.call(o,n)&&N(e,n,o[n]);return e};import{d as F,i as R,r as p,f as G,o as J,ao as j,x as T,k as g,l as s,F as A,q as U,m as B,z as d,t as b,ap as E,aD as Y,aq as L,ar as K,j as f,as as Q}from"./vendor.b81db0ac.js";import{_ as W,q as X,r as Z,s as x,t as H,u as ee}from"./index.d9170198.js";const te=F({name:"function",components:{},setup(){R("emitter").on("addArticles",a=>{I(1)});const o=p([{name:"Operate",key:"",sortDesc:null},{name:"Title",key:"title",sortDesc:null},{name:"Tag",key:"tag",sortDesc:null},{name:"Author",key:"author",sortDesc:null},{name:"CreateTime",key:"timeforshow",sortDesc:null},{name:"IsPublic",key:"isPublic",sortDesc:null}]),n=p([]),C=p(0),_=p(10),D=p(1),v=G();async function h(){var a,l,y;try{const m=+C.value/+_.value+1,je=(m-1)*_.value,Be=_.value,M=await Z(`?page=${m}`);console.log("res",M);let $=[...(a=M.data)==null?void 0:a.articles];$=$.map(P=>(P.timeforshow=Y(new Date(+P.create_at)).format("YYYY/MM/DD HH:mm:ss"),P)),n.value=[...$],D.value=+((y=(l=M.data)==null?void 0:l.pagination)==null?void 0:y.total_pages)*10}catch(m){v.error(`${m.response?m.response.data.message:m}`,{timeout:2e3,hideProgressBar:!0})}}J(async()=>{await h()}),j(C,(a,l)=>{h()}),j(_,(a,l)=>{h()});const c=p(!1),i=p(1),r=p({}),I=async(a,l)=>{var y;if(u.value="",a==3)r.value=V({},l);else if(a==2){const m=await X(`${l.id}`);r.value=V({},m.data.article),((y=m.data.article)==null?void 0:y.tag)||(r.value.tag=[])}else r.value={tag:[]};i.value=a,c.value=!0},t=async()=>{const a=V({},r.value);a.due_date=Y(a.due_date).format("YYYY-MM-DD");try{if(i.value==1){a.create_at=+Date.now();const l=await x({data:a})}if(i.value==2){const l=await H({data:a},a.id)}if(i.value==3){const l=await ee(a.id)}v.info(`${i.value==1?"Add":i.value==2?"Edit":"Delete"}Success`,{timeout:2e3,hideProgressBar:!0})}catch(l){v.error(`${l.response?l.response.data.message:l}`,{timeout:2e3,hideProgressBar:!0})}h(),c.value=!1},w=async a=>{const l=V({},a);await H({data:l},l.id),h(),v.info("News\u8ABF\u6574Success",{timeout:2e3,hideProgressBar:!0})},u=p("");return{newTag:u,editTag:(a,l)=>{l==1?(r.value.tag.push(a),u.value=""):l==2&&(r.value.tag=r.value.tag.filter(y=>y!=a))},headers:o,items:n,toast:v,getData:h,offset:C,rows:_,totalItemsCount:D,editModal:c,modalItem:r,nowType:i,showEditModal:I,saveEditModal:t,setStatus:w}}}),k=e=>(L("data-v-03061215"),e=e(),K(),e),oe={class:"main-section px-3"},se=k(()=>s("section",{class:"search-block"},[s("h5",{class:"big-title"},"NewsManagement")],-1)),ae={class:"ecommerce-grid my-dark"},le=["onClick"],ne={class:"content",style:{cursor:"pointer","padding-top":"3px"}},de=["onClick"],ie=["onClick"],re=["title"],ue=["title"],ce=["title"],me=["title"],pe=["title"],ge={key:0,class:"mt-2 text-center text-xl font-semibold col-span-full",style:{"font-family":"Microsoft JhengHei, Helvetica"}},fe={class:"grid grid-flow-col auto-cols-max justify-center"},ve={class:"mt-4"},he={class:"modal-main-content"},we={key:0,class:"mb-2 font-black text-xl"},be={class:"p-inputgroup mt-2 col-span-full"},ye=k(()=>s("span",{class:"p-inputgroup-addon red-star"},"Title",-1)),ke={class:"p-inputgroup mt-2"},_e=k(()=>s("span",{class:"p-inputgroup-addon red-star"},"Tag",-1)),Te={class:"p-inputgroup mt-2"},Ve=k(()=>s("span",{class:"p-inputgroup-addon red-star"},"Image",-1)),Ce={class:"p-inputgroup mt-2 flex",style:{"grid-column":"1/-1"}},Ie=["onClick"],De={class:"p-inputgroup mt-2"},Me=k(()=>s("span",{class:"p-inputgroup-addon red-star"},"Author",-1)),$e={class:"p-inputgroup mt-2",style:{"grid-column":"1/-1"}},Pe=k(()=>s("span",{class:"p-inputgroup-addon red-star"},"Outline",-1)),Ae={class:"p-inputgroup mt-2"},Ue=k(()=>s("span",{class:"p-inputgroup-addon"},"IsPublic",-1)),Ee={class:"p-inputgroup mt-2",style:{"grid-column":"1/-1"}};function Se(e,o,n,C,_,D){const v=T("Checkbox"),h=T("Paginator"),c=T("InputText"),i=T("Button"),r=T("Editor"),I=T("Dialog");return f(),g("section",oe,[se,s("header",ae,[(f(!0),g(A,null,U(e.headers,(t,w)=>(f(),g("div",{key:`headers${w}`,class:"header",onClick:u=>e.sort(t)},b(t.name),9,le))),128))]),(f(!0),g(A,null,U(e.items,(t,w)=>(f(),g("main",{class:"ecommerce-grid",key:`content${w}`,style:Q([{color:"#39312e"},w%2==0?"background-color:#ffffff ;":"background-color:#e7f2f3;"])},[s("div",ne,[s("button",{class:"text-white font-bold uppercase px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-2 mb-1 text-sm",type:"button",style:{background:"#0d4a9e"},onClick:u=>e.showEditModal(2,t)}," Edit ",8,de),s("button",{class:"text-white font-bold uppercase px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 mb-1 text-sm",type:"button",style:{background:"#218be1"},onClick:u=>e.showEditModal(3,t)}," Delete ",8,ie)]),s("div",{class:"content",title:t.title},b(t.title||""),9,re),s("div",{class:"content",title:t.tag},b(t.tag?t.tag.join(","):""),9,ue),s("div",{class:"content",title:t.author},b(t.author||""),9,ce),s("div",{class:"content",title:t.timeforshow},b(t.timeforshow||""),9,me),s("div",{class:"content",title:t.isPublic},[d(v,{binary:!0,modelValue:t.isPublic,"onUpdate:modelValue":u=>t.isPublic=u,onChange:u=>e.setStatus(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])],8,pe)],4))),128)),e.items.length?B("",!0):(f(),g("main",ge," No Data ")),s("footer",fe,[d(h,{first:e.offset,"onUpdate:first":o[0]||(o[0]=t=>e.offset=t),rows:e.rows,"onUpdate:rows":o[1]||(o[1]=t=>e.rows=t),rowsPerPageOptions:[5,10,50],totalRecords:e.totalItemsCount},null,8,["first","rows","totalRecords"]),s("div",ve,"\u5171"+b(e.totalItemsCount)+"\u7B46",1)]),d(I,{visible:e.editModal,"onUpdate:visible":o[11]||(o[11]=t=>e.editModal=t),style:{width:"85vw"},draggable:!1,modal:!0,class:"custom-modal"},{header:E(()=>[s("h3",null,b(e.nowType==1?"AddNews":e.nowType==2?"EditNews":"DeleteNews"),1)]),footer:E(()=>[d(i,{label:"Confirm",onClick:e.saveEditModal},null,8,["onClick"]),d(i,{label:"Cancel",class:"p-button-success",onClick:o[10]||(o[10]=t=>e.editModal=!1)})]),default:E(()=>[s("section",he,[e.nowType==3?(f(),g("h2",we," Delete This News? ")):B("",!0),s("div",be,[ye,d(c,{type:"text",modelValue:e.modalItem.title,"onUpdate:modelValue":o[2]||(o[2]=t=>e.modalItem.title=t),modelModifiers:{trim:!0},disabled:e.nowType==3,class:"custom-search"},null,8,["modelValue","disabled"])]),s("div",ke,[_e,d(c,{modelValue:e.newTag,"onUpdate:modelValue":o[3]||(o[3]=t=>e.newTag=t),modelModifiers:{trim:!0},class:"custom-search",disabled:e.nowType==3,type:"text",placeholder:"\u52A0\u5165\u65B0TAG"},null,8,["modelValue","disabled"]),d(i,{label:"Add",onClick:o[4]||(o[4]=t=>e.editTag(e.newTag,1))})]),s("div",Te,[Ve,d(c,{modelValue:e.modalItem.image,"onUpdate:modelValue":o[5]||(o[5]=t=>e.modalItem.image=t),modelModifiers:{trim:!0},class:"custom-search",disabled:e.nowType==3,type:"text"},null,8,["modelValue","disabled"])]),s("div",Ce,[(f(!0),g(A,null,U(e.modalItem.tag,(t,w)=>(f(),g("div",{class:"tage-data",key:`articles${w}`},[s("span",{class:"cursor-pointer",onClick:u=>e.editTag(t,2)},"\xA0#"+b(t)+"\xA0\xA0",9,Ie)]))),128))]),s("div",De,[Me,d(c,{modelValue:e.modalItem.author,"onUpdate:modelValue":o[6]||(o[6]=t=>e.modalItem.author=t),modelModifiers:{trim:!0},class:"custom-search",disabled:e.nowType==3},null,8,["modelValue","disabled"])]),s("div",$e,[Pe,d(c,{modelValue:e.modalItem.outline,"onUpdate:modelValue":o[7]||(o[7]=t=>e.modalItem.outline=t),modelModifiers:{trim:!0},class:"custom-search",disabled:e.nowType==3},null,8,["modelValue","disabled"])]),s("div",Ae,[Ue,d(v,{style:{margin:"12px 0 0 10px"},binary:!0,modelValue:e.modalItem.isPublic,"onUpdate:modelValue":o[8]||(o[8]=t=>e.modalItem.isPublic=t)},null,8,["modelValue"])]),s("div",Ee,[d(r,{class:"w-full custom-search",modelValue:e.modalItem.content,"onUpdate:modelValue":o[9]||(o[9]=t=>e.modalItem.content=t),editorStyle:"height: 460px",disabled:e.nowType==3},null,8,["modelValue","disabled"])])])]),_:1},8,["visible"])])}var Oe=W(te,[["render",Se],["__scopeId","data-v-03061215"]]);export{Oe as default};
